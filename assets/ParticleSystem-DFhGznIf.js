import{_ as L,i as z,r as R,o as U,w as d,a as y,c as w,b as i,j as o,v as s,u as l,d as g,e as T,F as v,f as b,k as I,h as P,p as F,l as D}from"./index-u4VPhVJI.js";const B="/cesiumjs-learn/CesiumMilkTruck.glb",_="/cesiumjs-learn/smoke.png",r=S=>(F("data-v-0a28a69d"),S=S(),D(),S),H=r(()=>i("div",{id:"cesiumContainer",class:"map"},null,-1)),O={id:"toolbar"},A=r(()=>i("td",null,"Rate",-1)),j=r(()=>i("td",null,"Size",-1)),G=r(()=>i("td",null,"Min Life",-1)),J=r(()=>i("td",null,"Max Life",-1)),N=r(()=>i("td",null,"Min Speed",-1)),Q=r(()=>i("td",null,"Max Speed",-1)),W=r(()=>i("td",null,"Start Scale",-1)),q=r(()=>i("td",null,"End Scale",-1)),K=r(()=>i("td",null,"Gravity",-1)),X={__name:"ParticleSystem",setup(S){let u=null,e=z({emissionRate:5,gravity:0,minimumParticleLife:1.2,maximumParticleLife:1.2,minimumSpeed:1,maximumSpeed:4,startScale:1,endScale:5,particleSize:25}),x=null,m=null,C=R("Circle Emitter");const M=[{value:"Circle Emitter",name:"圆形发射器"},{value:"Sphere Emitter",name:"球体发射器"},{value:"Cone Emitter",name:"锥形发射器"},{value:"Box Emitter",name:"盒发射器"}];U(async()=>{u=new Cesium.Viewer("cesiumContainer");const a=Cesium.JulianDate.fromDate(new Date(2015,2,25,16)),n=Cesium.JulianDate.addSeconds(a,120,new Cesium.JulianDate);u.clock.startTime=a.clone(),u.clock.stopTime=n.clone(),u.clock.currentTime=a.clone(),u.clock.clockRange=Cesium.ClockRange.LOOP_STOP,u.clock.multiplier=1,u.clock.shouldAnimate=!0,u.timeline.zoomTo(a,n);const c=Cesium.Cartesian3.fromDegrees(-75.15787310614596,39.97862668312678),p=Cesium.Cartesian3.fromDegrees(-75.1633691390455,39.95355089912078),t=new Cesium.SampledPositionProperty;t.addSample(a,c),t.addSample(n,p),x=u.entities.add({availability:new Cesium.TimeIntervalCollection([new Cesium.TimeInterval({start:a,stop:n})]),model:{uri:B,minimumPixelSize:64},viewFrom:new Cesium.Cartesian3(-100,0,100),position:t,orientation:new Cesium.VelocityOrientationProperty(t)}),u.trackedEntity=x,m=u.scene.primitives.add(new Cesium.ParticleSystem({image:_,startColor:Cesium.Color.LIGHTSEAGREEN.withAlpha(.7),endColor:Cesium.Color.WHITE.withAlpha(0),startScale:e.startScale,endScale:e.endScale,minimumParticleLife:e.minimumParticleLife,maximumParticleLife:e.maximumParticleLife,minimumSpeed:e.minimumSpeed,maximumSpeed:e.maximumSpeed,imageSize:new Cesium.Cartesian2(e.particleSize,e.particleSize),emissionRate:e.emissionRate,lifetime:16,emitter:new Cesium.CircleEmitter(2),emitterModelMatrix:f()})),u.scene.preUpdate.addEventListener(function(Y,k){m.modelMatrix=E(x,k),m.emitterModelMatrix=f(),e.spin&&(e.heading+=1,e.pitch+=1,e.roll+=1)})}),new Cesium.Cartesian3,new Cesium.Quaternion,new Cesium.Matrix3,new Cesium.Matrix4;function E(a,n){return a.computeModelMatrix(n,new Cesium.Matrix4)}function f(){const a=new Cesium.Matrix4,n=new Cesium.Cartesian3,c=new Cesium.Quaternion;let p=new Cesium.HeadingPitchRoll;const t=new Cesium.TranslationRotationScale;return p=Cesium.HeadingPitchRoll.fromDegrees(0,0,0,p),t.translation=Cesium.Cartesian3.fromElements(-4,0,1.4,n),t.rotation=Cesium.Quaternion.fromHeadingPitchRoll(p,c),Cesium.Matrix4.fromTranslationRotationScale(t,a)}d(()=>e.emissionRate,a=>{m.emissionRate=parseFloat(a)}),d(()=>e.minimumParticleLife,a=>{m.minimumParticleLife=parseFloat(a)}),d(()=>e.maximumParticleLife,a=>{m.maximumParticleLife=parseFloat(a)}),d(()=>e.minimumSpeed,a=>{m.minimumSpeed=parseFloat(a)}),d(()=>e.maximumSpeed,a=>{m.maximumSpeed=parseFloat(a)}),d(()=>e.startScale,a=>{m.startScale=parseFloat(a)}),d(()=>e.endScale,a=>{m.endScale=parseFloat(a)}),d(()=>e.particleSize,a=>{a=parseFloat(a),m.minimumImageSize.x=a,m.minimumImageSize.y=a,m.maximumImageSize.x=a,m.maximumImageSize.y=a});function V(a){switch(a){case"Circle Emitter":m.emitter=new Cesium.CircleEmitter(2);break;case"Sphere Emitter":m.emitter=new Cesium.SphereEmitter(2.5);break;case"Cone Emitter":m.emitter=new Cesium.ConeEmitter(Cesium.Math.toRadians(45));break;case"Box Emitter":m.emitter=new Cesium.BoxEmitter(new Cesium.Cartesian3(10,10,10));break}}return(a,n)=>{const c=P("el-option"),p=P("el-select");return y(),w(v,null,[H,i("div",O,[i("table",null,[i("tbody",null,[i("tr",null,[A,i("td",null,[o(i("input",{type:"range",min:"0.0",max:"100.0",step:"1","onUpdate:modelValue":n[0]||(n[0]=t=>l(e).emissionRate=t)},null,512),[[s,l(e).emissionRate]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[1]||(n[1]=t=>l(e).emissionRate=t)},null,512),[[s,l(e).emissionRate]])])]),i("tr",null,[j,i("td",null,[o(i("input",{type:"range",min:"2",max:"60.0",step:"1","onUpdate:modelValue":n[2]||(n[2]=t=>l(e).particleSize=t)},null,512),[[s,l(e).particleSize]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[3]||(n[3]=t=>l(e).particleSize=t)},null,512),[[s,l(e).particleSize]])])]),i("tr",null,[G,i("td",null,[o(i("input",{type:"range",min:"0.1",max:"30.0",step:"0.1","onUpdate:modelValue":n[4]||(n[4]=t=>l(e).minimumParticleLife=t)},null,512),[[s,l(e).minimumParticleLife]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[5]||(n[5]=t=>l(e).minimumParticleLife=t)},null,512),[[s,l(e).minimumParticleLife]])])]),i("tr",null,[J,i("td",null,[o(i("input",{type:"range",min:"0.1",max:"30.0",step:"0.1","onUpdate:modelValue":n[6]||(n[6]=t=>l(e).maximumParticleLife=t)},null,512),[[s,l(e).maximumParticleLife]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[7]||(n[7]=t=>l(e).maximumParticleLife=t)},null,512),[[s,l(e).maximumParticleLife]])])]),i("tr",null,[N,i("td",null,[o(i("input",{type:"range",min:"0.0",max:"30.0",step:"1","onUpdate:modelValue":n[8]||(n[8]=t=>l(e).minimumSpeed=t)},null,512),[[s,l(e).minimumSpeed]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[9]||(n[9]=t=>l(e).minimumSpeed=t)},null,512),[[s,l(e).minimumSpeed]])])]),i("tr",null,[Q,i("td",null,[o(i("input",{type:"range",min:"0.0",max:"30.0",step:"1","onUpdate:modelValue":n[10]||(n[10]=t=>l(e).maximumSpeed=t)},null,512),[[s,l(e).maximumSpeed]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[11]||(n[11]=t=>l(e).maximumSpeed=t)},null,512),[[s,l(e).maximumSpeed]])])]),i("tr",null,[W,i("td",null,[o(i("input",{type:"range",min:"0.0",max:"10.0",step:"1","onUpdate:modelValue":n[12]||(n[12]=t=>l(e).startScale=t)},null,512),[[s,l(e).startScale]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[13]||(n[13]=t=>l(e).startScale=t)},null,512),[[s,l(e).startScale]])])]),i("tr",null,[q,i("td",null,[o(i("input",{type:"range",min:"0.0",max:"10.0",step:"1","onUpdate:modelValue":n[14]||(n[14]=t=>l(e).endScale=t)},null,512),[[s,l(e).endScale]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[15]||(n[15]=t=>l(e).endScale=t)},null,512),[[s,l(e).endScale]])])]),i("tr",null,[K,i("td",null,[o(i("input",{type:"range",min:"-20.0",max:"20.0",step:"1","onUpdate:modelValue":n[16]||(n[16]=t=>l(e).gravity=t)},null,512),[[s,l(e).gravity]]),o(i("input",{type:"text",size:"5","onUpdate:modelValue":n[17]||(n[17]=t=>l(e).gravity=t)},null,512),[[s,l(e).gravity]])])])])]),g(p,{modelValue:l(C),"onUpdate:modelValue":n[18]||(n[18]=t=>I(C)?C.value=t:C=t),onChange:V,placeholder:"选择粒子发射器"},{default:T(()=>[(y(),w(v,null,b(M,t=>g(c,{key:t.value,label:t.name,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])],64)}}},$=L(X,[["__scopeId","data-v-0a28a69d"]]);export{$ as default};
